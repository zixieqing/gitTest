---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xingweihao.
--- DateTime: 2019-09-04 17:05
---
---@class OrderChestView
local OrderChestView = class('OrderChestView', function()
	local node = CLayout:create(cc.size(555,display.height))
	node.name = 'OrderChestView'
	return node
end)
local RES_DICT               = {
	BOX_FOOD_BG_TIPS    = _res("ui/home/carexplore/box_food_bg_tips"),
	BOX_FOOD_BG_BALLOON = _res("ui/home/carexplore/box_food_bg_balloon"),
	FOOD_COLOUR         = _spn("ui/home/carexplore/food_colour"),

}
function OrderChestView:ctor()
	self:InitUI()
end

--- 初始化UI
function OrderChestView:InitUI()
	self:setAnchorPoint(display.LEFT_BOTTOM)
	self:setPosition(0,0)
	local bgSize = cc.size(555 ,display.height )
	local titleBtn = display.newButton(bgSize.width/2 , bgSize.height -130, { n = RES_DICT.BOX_FOOD_BG_TIPS, ap= display.CENTER_TOP})
	self:addChild(titleBtn)
	titleBtn:setVisible(false)
	local bgBalloonImage = display.newImageView(RES_DICT.BOX_FOOD_BG_BALLOON , 0,0, {ap = display.RIGHT_BOTTOM})
	self:addChild(bgBalloonImage)

	local foodColourSpine = sp.SkeletonAnimation:create(RES_DICT.FOOD_COLOUR.json,RES_DICT.FOOD_COLOUR.atlas , 1 )
	foodColourSpine:setAnimation(0, "idle" , true)
	foodColourSpine:setPosition(0, bgSize.height)
	foodColourSpine:setAnchorPoint(display.CENTER_TOP)
	self:addChild(foodColourSpine)
	self.viewData = {
		titleBtn       = titleBtn,
		bgBalloonImage = bgBalloonImage,
	}

end
function OrderChestView:UpdateTitlePos(posIndex)
	local titleBtn = self.viewData.titleBtn
	titleBtn:setVisible(true)
	if posIndex == 1 then
		titleBtn:setPosition(555/2 , display.height - 63)
		titleBtn:setVisible(false)
	elseif posIndex == 2 then
		titleBtn:setPosition(555/2 , display.height - 130)	
	elseif posIndex == 3  then 
		titleBtn:setVisible(false)	
	end
end
function OrderChestView:UpdateView(isFull)
	if not isFull then
		display.commonLabelParams(self.viewData.titleBtn , {color = "#FFF5e9" , text = __('必定获得伴手礼'),fontSize = 24})
	else
		display.commonLabelParams(self.viewData.titleBtn , {color = "#FFF5e9" , text = __('仓库已满，无法获得伴手礼'),fontSize = 24})
	end
end

return  OrderChestView
