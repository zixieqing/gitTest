---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xingweihao.
--- DateTime: 2020/6/10 2:28 PM
---
---@class PopSowSeedView:Node
local PopSowSeedView = class('PopSowSeedView', function ()
	local node = CLayout:create(display.size)
	node.name = 'Game.views.activityMap.PopSowSeedView'
	node:enableNodeEvents()
	return node
end)
local RES_DICT={
	COMMON_BG_8                              = _res("ui/common/common_bg_8.png"),
	COMMON_BTN_WHITE_BIG                     = _res("ui/common/common_btn_white_big.png"),
	COMMON_BTN_ORANGE                        = _res("ui/home/activity/common_btn_orange.png")
}

function PopSowSeedView:ctor(param)
	local data = param or {}
	self.seedId = data.seedId
	self.summaryId = data.summaryId
	self.callfunc = data.callfunc
	self:InitUI()
	self:BindClick()
	self:UpdateView()
end
--[[
init ui
--]]
function PopSowSeedView:InitUI()
	local closeLayer = display.newLayer(display.cx, display.cy ,{ap = display.CENTER,size = display.size,color = cc.c4b(0,0,0,175),enable = true})
	self:addChild(closeLayer,0)
	local centerLayer = display.newLayer(display.cx + 0, display.cy  + 0 ,{ap = display.CENTER,size = cc.size(435,308)})
	self:addChild(centerLayer,0)
	local centerSwallowLayer = display.newLayer(217.5, 154 ,{ap = display.CENTER,size = cc.size(435,308),color = cc.c4b(0,0,0,0),enable = true})
	centerLayer:addChild(centerSwallowLayer,0)
	local commonBgImage = display.newImageView( RES_DICT.COMMON_BG_8 ,217.5, 154,{ap = display.CENTER})
	centerLayer:addChild(commonBgImage,0)
	local titleLabel = display.newLabel(217.5, 229 , {fontSize = 26,text = '确认种植初级种子吗？',color = '#b1613a',ap = display.CENTER})
	centerLayer:addChild(titleLabel,0)
	local matureLabel = display.newRichLabel(217.5,  176,{c = {
		fontWithColor("14" , {text = ""})
	}})
	centerLayer:addChild(matureLabel,0)
	local cancelBtn = display.newButton(139.5, 55 , {n = RES_DICT.COMMON_BTN_WHITE_BIG,ap = display.CENTER,scale9 = true,size = cc.size(123,59)})
	centerLayer:addChild(cancelBtn,0)
	display.commonLabelParams(cancelBtn ,fontWithColor(14 , {text = __('取消'),color = '#ffffff',paddingW  = 20,safeW = 83}))
	local makeBtn = display.newButton(298.5, 57 , {n = RES_DICT.COMMON_BTN_ORANGE,ap = display.CENTER,scale9 = true,size = cc.size(123,59)})
	centerLayer:addChild(makeBtn,0)
	display.commonLabelParams(makeBtn ,fontWithColor(14 , {text = __('确定'),color = '#ffffff',paddingW  = 20,safeW = 83}))
	self.viewData = {
		closeLayer                = closeLayer,
		centerLayer               = centerLayer,
		centerSwallowLayer        = centerSwallowLayer,
		commonBgImage             = commonBgImage,
		titleLabel                = titleLabel,
		matureLabel               = matureLabel,
		matureTimeLabel           = matureTimeLabel,
		cancelBtn                 = cancelBtn,
		makeBtn                   = makeBtn
	}
end
function PopSowSeedView:BindClick()
	display.commonUIParams(self.viewData.closeLayer , {cb = handler(self, self.CloseClick) })
	display.commonUIParams(self.viewData.cancelBtn , {cb = handler(self, self.CloseClick) })
	display.commonUIParams(self.viewData.makeBtn , {cb = handler(self, self.EnterClick) })
end
function PopSowSeedView:UpdateView()
	local seedConf = CONF.ACTIVITY_POP.FARM_SEED:GetValue(self.summaryId)[tostring(self.seedId)]
	local duration = seedConf.duration
	local name = seedConf.name
	local timeFormatStr = CommonUtils.getTimeFormatByType(checkint(duration),1)
	display.reloadRichLabel(self.viewData.matureLabel , {
		c= {
			{ap = display.RIGHT_CENTER,fontSize = 20,text = __('成熟时间：'),color = '#78564b'} ,
			{ap = display.LEFT_CENTER,fontSize = 20,text = timeFormatStr,color = '#d23d3d'}
		}
	})
	display.commonLabelParams(self.viewData.titleLabel , {text = string.fmt(__('确认种植_name_吗？') , { _name_ = name}) })
end
function PopSowSeedView:CloseClick()
	self:runAction(
		cc.RemoveSelf:create()
	)
end

function PopSowSeedView:EnterClick()
	if self.callfunc then
		self.callfunc()
		self.callfunc = nil
		self:CloseClick()
	end
end
return PopSowSeedView